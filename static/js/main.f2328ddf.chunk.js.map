{"version":3,"sources":["components/PostsList/PostsList.tsx","api/api.ts","api/comment.ts","components/NewCommentForm/NewCommentForm.tsx","components/PostDetails/PostDetails.tsx","App.tsx","api/user.ts","api/post.ts","index.tsx"],"names":["PostsList","posts","selectedPostId","handleSelectedPostId","className","map","post","userId","title","type","value","id","onClick","postId","BASE_URL","get","url","fetch","then","res","json","getCommentsByPostId","deletePostComment","commentId","method","postComment","newComment","newPost","headers","body","JSON","stringify","NewCommentForm","setComments","useState","userName","setUserName","userEmail","setUserEmail","userComment","setUserComment","onFormSubmit","event","a","preventDefault","name","email","updatedComments","onSubmit","required","placeholder","onChange","target","PostDetails","comments","errorWithComments","setErrorWithComments","isCommentVisible","setCommentVisibility","useEffect","getCommentsServer","commentFromServer","onDeletindComment","useCallback","filteredComments","filter","comment","App","users","setUsers","selectedUserId","setSelectedUserId","setPosts","setSelectedPostId","openPostDetails","setopenPostDetails","failedToloadPosts","setFailedToloadPosts","getDataFromServer","usersFromServer","getPostsByUserFromServer","postsFromServer","user","chosenPostId","ReactDOM","render","document","getElementById"],"mappings":"mVASaA,EAA6B,SAAC,GAIpC,IAHLC,EAGI,EAHJA,MACAC,EAEI,EAFJA,eACAC,EACI,EADJA,qBAUA,OACE,sBAAKC,UAAU,YAAf,UACE,wCAEA,oBAAIA,UAAU,kBAAd,SACGH,EAAMI,KAAI,SAAAC,GAAI,OACb,qBACEF,UAAU,kBADZ,UAIE,gCACE,wCAEG,IACAE,EAAKC,OAHR,KAKG,OAEFD,EAAKE,SAER,wBACEC,KAAK,SACLL,UAAU,2BACVM,MAAOJ,EAAKK,GACZC,QAAS,kBAhCEC,EAiCKP,EAAKK,QA/B7BR,EADED,IAAmBW,EACAA,EAEA,GAJH,IAACA,GA4Bb,SAOIX,IAAmBI,EAAKK,GAAM,QAAY,WAnBzCL,EAAKK,a,OC5BTG,EAAW,oCAEjB,SAASC,EAAOC,GACrB,OAAOC,MAAMH,EAAWE,GACrBE,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UCHd,IAAMC,EAAsB,SAACR,GAClC,OAAOE,EAAI,oBAAD,OAAqBF,KAGpBS,EAAoB,SAACC,GAChC,ODCwBP,ECDV,aAAD,OAAcO,GDEpBN,MAAMH,EAAWE,EAAK,CAAEQ,OAAQ,WACpCN,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAFd,IAAmBJ,GCEnB,SAASS,EAAYC,GAC1B,ODEmCC,ECFVD,EDGlBT,MAAMH,ECHD,YDIV,CACEU,OAAQ,OACRI,QAAS,CAAE,eAAgB,mCAC3BC,KAAMC,KAAKC,UAAUJ,KACpBT,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UANhB,IAA8BO,E,UEJxBK,EAAkC,SAAC,GAA6B,IAA3BnB,EAA0B,EAA1BA,OAAQoB,EAAkB,EAAlBA,YACxD,EAAgCC,mBAAiB,IAAjD,mBAAOC,EAAP,KAAiBC,EAAjB,KACA,EAAkCF,mBAAiB,IAAnD,mBAAOG,EAAP,KAAkBC,EAAlB,KACA,EAAsCJ,mBAAiB,IAAvD,mBAAOK,EAAP,KAAoBC,EAApB,KAQMC,EAAY,uCAAG,WAAOC,GAAP,iBAAAC,EAAA,6DACnBD,EAAME,iBAEAlB,EAAa,CACjBb,SACAgC,KAAMV,EACNW,MAAOT,EACPR,KAAMU,GAPW,SAUbd,EAAYC,GAVC,uBAYWL,EAAoBR,GAZ/B,OAYbkC,EAZa,OAcnBd,EAAYc,GAnBZX,EAAY,IACZE,EAAa,IACbE,EAAe,IAGI,2CAAH,sDAmBlB,OACE,uBAAMpC,UAAU,iBAAiB4C,SAAUP,EAA3C,UACE,qBAAKrC,UAAU,aAAf,SACE,uBACEK,KAAK,OACLoC,KAAK,OACLI,UAAQ,EACRC,YAAY,YACZ9C,UAAU,wBACVM,MAAOyB,EACPgB,SAAU,SAACT,GAAD,OAAWN,EAAYM,EAAMU,OAAO1C,YAIlD,qBAAKN,UAAU,aAAf,SACE,uBACEK,KAAK,OACLoC,KAAK,QACLI,UAAQ,EACRC,YAAY,aACZ9C,UAAU,wBACVM,MAAO2B,EACPc,SAAU,SAACT,GAAD,OAAWJ,EAAaI,EAAMU,OAAO1C,YAInD,qBAAKN,UAAU,aAAf,SACE,0BACEyC,KAAK,OACLI,UAAQ,EACRC,YAAY,oBACZ9C,UAAU,wBACVM,MAAO6B,EACPY,SAAU,SAACT,GAAD,OAAWF,EAAeE,EAAMU,OAAO1C,YAIrD,wBACED,KAAK,SACLL,UAAU,uCAFZ,+BCnEOiD,G,MAA+B,SAAC,GAAgB,IAAdxC,EAAa,EAAbA,OAC7C,EAAgCqB,mBAAoB,IAApD,mBAAOoB,EAAP,KAAiBrB,EAAjB,KACA,EAAkDC,oBAAS,GAA3D,mBAAOqB,EAAP,KAA0BC,EAA1B,KACA,EAAiDtB,oBAAS,GAA1D,mBAAOuB,EAAP,KAAyBC,EAAzB,KAEAC,qBAAU,WACR,IAAMC,EAAiB,uCAAG,4BAAAjB,EAAA,+EAEUtB,EAAoBR,GAF9B,OAEhBgD,EAFgB,OAItB5B,EAAY4B,GAJU,gDAMtBL,GAAqB,GANC,yDAAH,qDAUvBI,MACC,CAAC/C,IAEJ,IAAMiD,EAAoBC,sBAAW,uCAAC,WAAOpD,GAAP,eAAAgC,EAAA,sEAC9BrB,EAAkBX,GADY,cAG9BqD,EAAmB,YAAIV,GAAUW,QACrC,SAAAC,GAAO,OAAIA,EAAQvD,KAAOA,KAJQ,SAO9BsB,EAAY+B,GAPkB,2CAAD,sDAQlC,CAACV,IAEJ,OACE,sBAAKlD,UAAU,cAAf,UACE,+CAEA,yBAASA,UAAU,oBAAnB,SACE,+FAGF,0BAASA,UAAU,wBAAnB,UACE,wBACEK,KAAK,SACLL,UAAU,SACVQ,QAAS,kBAAM8C,GAAsBD,IAHvC,SAKGA,EAAoB,gBAAoB,kBAE1CF,GAAqB,wDACrBE,GAEK,oBAAIrD,UAAU,oBAAd,SACGkD,EAASjD,KAAI,SAAA6D,GAAO,OACnB,qBACE9D,UAAU,yBADZ,UAIE,wBACEK,KAAK,SACLL,UAAU,oCACVQ,QAAS,kBAAMkD,EAAkBI,EAAQvD,KAH3C,eAOA,4BAAIuD,EAAQrB,SATPqB,EAAQvD,YAgB3B,kCACE,qBAAKP,UAAU,4BAAf,SACE,cAAC,EAAD,CACES,OAAQA,EACRoB,YAAaA,aCeVkC,EAvFO,WACpB,MAA0BjC,mBAAiB,IAA3C,mBAAOkC,EAAP,KAAcC,EAAd,KACA,EAA4CnC,mBAAS,GAArD,mBAAOoC,EAAP,KAAuBC,EAAvB,KACA,EAA0BrC,mBAAiB,IAA3C,mBAAOjC,EAAP,KAAcuE,EAAd,KACA,EAA4CtC,mBAAS,GAArD,mBAAOhC,EAAP,KAAuBuE,EAAvB,KACA,EAA8CvC,oBAAS,GAAvD,mBAAOwC,EAAP,KAAwBC,EAAxB,KACA,EAAkDzC,oBAAS,GAA3D,mBAAO0C,EAAP,KAA0BC,EAA1B,KAEAlB,qBAAU,WACR,IAAMmB,EAAiB,uCAAG,4BAAAnC,EAAA,sECfrB5B,EAAY,UDeS,OAClBgE,EADkB,OAGxBV,EAASU,GAHe,2CAAH,qDAMvBD,MACC,IAQHnB,qBAAU,WACR,IAAMqB,EAAwB,uCAAG,4BAAArC,EAAA,+EE3B5B5B,GALwBJ,EFkCsB2D,GE7B1C,iBAAD,OAAkB3D,GAHf,UF8BsB,OAEvBsE,EAFuB,OAI7BT,EAASS,GAJoB,gDAM7BJ,GAAqB,GANQ,kCEhCL,IAAClE,IFgCI,oBAAH,qDAU9BqE,MACC,CAACV,IAOJ,OACE,sBAAKlE,UAAU,MAAf,UACE,yBAAQA,UAAU,cAAlB,UACE,wDAGE,yBACEA,UAAU,qBACVM,MAAO4D,EACPnB,SAlCmB,SAC3BT,GAEA6B,GAAmB7B,EAAMU,OAAO1C,QA4B1B,UAKE,wBAAQA,MAAM,IAAd,uBACC0D,EAAM/D,KAAI,SAAA6E,GAAI,OACb,wBAEExE,MAAOwE,EAAKvE,GAFd,SAIGuE,EAAKrC,MAHDqC,EAAKvE,aAQjBiE,GACC,wDAIJ,uBAAMxE,UAAU,YAAhB,UACE,qBAAKA,UAAU,eAAf,SACE,cAAC,EAAD,CACEH,MAAOA,EACPC,eAAgBA,EAChBC,qBArCmB,SAACgF,GAC5BV,EAAkBU,GAClBR,IAAqBQ,QAuCjB,qBAAK/E,UAAU,eAAf,SACGsE,GAAmB,cAAC,EAAD,CAAa7D,OAAQX,aGtFnDkF,IAASC,OACP,cAAC,EAAD,IACAC,SAASC,eAAe,W","file":"static/js/main.f2328ddf.chunk.js","sourcesContent":["import Post from '../types/Post';\nimport './PostsList.scss';\n\ninterface Props{\n  posts: Post[];\n  selectedPostId: number,\n  handleSelectedPostId: (postId: number) => void,\n}\n\nexport const PostsList: React.FC<Props> = ({\n  posts,\n  selectedPostId,\n  handleSelectedPostId,\n}) => {\n  const handlerButton = (postId: number) => {\n    if (selectedPostId !== postId) {\n      handleSelectedPostId(postId);\n    } else {\n      handleSelectedPostId(0);\n    }\n  };\n\n  return (\n    <div className=\"PostsList\">\n      <h2>Posts:</h2>\n\n      <ul className=\"PostsList__list\">\n        {posts.map(post => (\n          <li\n            className=\"PostsList__item\"\n            key={post.id}\n          >\n            <div>\n              <b>\n                [User #\n                {' '}\n                {post.userId}\n                ]:\n                {' '}\n              </b>\n              {post.title}\n            </div>\n            <button\n              type=\"button\"\n              className=\"PostsList__button button\"\n              value={post.id}\n              onClick={() => (\n                handlerButton(post.id))}\n            >\n              { selectedPostId === post.id ? ('Close') : ('Open')}\n            </button>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n","import Comment from '../components/types/Comment';\n\nexport const BASE_URL = 'https://mate.academy/students-api';\n\nexport function get<T>(url: string): Promise<T> {\n  return fetch(BASE_URL + url)\n    .then(res => res.json());\n}\n\nexport function remove<T>(url: string): Promise<T> {\n  return fetch(BASE_URL + url, { method: 'DELETE' })\n    .then(res => res.json());\n}\n\nexport function post<T>(url: string, newPost: Comment): Promise<T> {\n  return fetch(BASE_URL + url,\n    {\n      method: 'POST',\n      headers: { 'Content-type': 'application/json; charset=UTF-8' },\n      body: JSON.stringify(newPost),\n    }).then(res => res.json());\n}\n","import { get, post, remove } from './api';\nimport Comment from '../components/types/Comment';\n\nexport const getCommentsByPostId = (postId: number): Promise<Comment[]> => {\n  return get(`/comments?postId=${postId}`);\n};\n\nexport const deletePostComment = (commentId: number): Promise<Comment> => {\n  return remove(`/comments/${commentId}`);\n};\n\nexport function postComment(newComment: Comment) {\n  return post('/comments', newComment);\n}\n","import React, { FormEvent, useState } from 'react';\nimport './NewCommentForm.scss';\nimport Comment from '../types/Comment';\nimport { getCommentsByPostId, postComment } from '../../api/comment';\n\ninterface Props {\n  postId: number,\n  setComments: (comments: Comment[]) => void\n}\n\nexport const NewCommentForm: React.FC<Props> = ({ postId, setComments }) => {\n  const [userName, setUserName] = useState<string>('');\n  const [userEmail, setUserEmail] = useState<string>('');\n  const [userComment, setUserComment] = useState<string>('');\n\n  const clearForm = () => {\n    setUserName('');\n    setUserEmail('');\n    setUserComment('');\n  };\n\n  const onFormSubmit = async (event: FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n\n    const newComment = {\n      postId,\n      name: userName,\n      email: userEmail,\n      body: userComment,\n    };\n\n    await postComment(newComment);\n\n    const updatedComments = await getCommentsByPostId(postId);\n\n    setComments(updatedComments);\n\n    clearForm();\n  };\n\n  return (\n    <form className=\"NewCommentForm\" onSubmit={onFormSubmit}>\n      <div className=\"form-field\">\n        <input\n          type=\"text\"\n          name=\"name\"\n          required\n          placeholder=\"Your name\"\n          className=\"NewCommentForm__input\"\n          value={userName}\n          onChange={(event) => setUserName(event.target.value)}\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <input\n          type=\"text\"\n          name=\"email\"\n          required\n          placeholder=\"Your email\"\n          className=\"NewCommentForm__input\"\n          value={userEmail}\n          onChange={(event) => setUserEmail(event.target.value)}\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <textarea\n          name=\"body\"\n          required\n          placeholder=\"Type comment here\"\n          className=\"NewCommentForm__input\"\n          value={userComment}\n          onChange={(event) => setUserComment(event.target.value)}\n        />\n      </div>\n\n      <button\n        type=\"submit\"\n        className=\"NewCommentForm__submit-button button\"\n      >\n        Add a comment\n      </button>\n    </form>\n  );\n};\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { deletePostComment, getCommentsByPostId } from '../../api/comment';\nimport { NewCommentForm } from '../NewCommentForm';\nimport './PostDetails.scss';\nimport Comment from '../types/Comment';\n\ninterface Props {\n  postId: number;\n}\n\nexport const PostDetails: React.FC<Props> = ({ postId }) => {\n  const [comments, setComments] = useState<Comment[]>([]);\n  const [errorWithComments, setErrorWithComments] = useState(false);\n  const [isCommentVisible, setCommentVisibility] = useState(true);\n\n  useEffect(() => {\n    const getCommentsServer = async () => {\n      try {\n        const commentFromServer = await getCommentsByPostId(postId);\n\n        setComments(commentFromServer);\n      } catch {\n        setErrorWithComments(true);\n      }\n    };\n\n    getCommentsServer();\n  }, [postId]);\n\n  const onDeletindComment = useCallback(async (id) => {\n    await deletePostComment(id);\n\n    const filteredComments = [...comments].filter(\n      comment => comment.id !== id,\n    );\n\n    await setComments(filteredComments);\n  }, [comments]);\n\n  return (\n    <div className=\"PostDetails\">\n      <h2>Post details:</h2>\n\n      <section className=\"PostDetails__post\">\n        <p>sunt aut facere repellat provident occaecati excepturi optio</p>\n      </section>\n\n      <section className=\"PostDetails__comments\">\n        <button\n          type=\"button\"\n          className=\"button\"\n          onClick={() => setCommentVisibility(!isCommentVisible)}\n        >\n          {isCommentVisible ? ('Hide comments') : ('Show comments')}\n        </button>\n        {errorWithComments && <p>Failed to Load Comments</p>}\n        {isCommentVisible\n            && (\n              <ul className=\"PostDetails__list\">\n                {comments.map(comment => (\n                  <li\n                    className=\"PostDetails__list-item\"\n                    key={comment.id}\n                  >\n                    <button\n                      type=\"button\"\n                      className=\"PostDetails__remove-button button\"\n                      onClick={() => onDeletindComment(comment.id)}\n                    >\n                      X\n                    </button>\n                    <p>{comment.name}</p>\n                  </li>\n                ))}\n              </ul>\n            )}\n      </section>\n\n      <section>\n        <div className=\"PostDetails__form-wrapper\">\n          <NewCommentForm\n            postId={postId}\n            setComments={setComments}\n          />\n        </div>\n      </section>\n    </div>\n  );\n};\n","import React, { useEffect, useState } from 'react';\nimport './App.scss';\nimport './styles/general.scss';\nimport { PostsList } from './components/PostsList';\nimport { PostDetails } from './components/PostDetails';\nimport User from './components/types/User';\nimport { getUsers } from './api/user';\nimport Post from './components/types/Post';\nimport { getPostsByUserID } from './api/post';\n\nconst App: React.FC = () => {\n  const [users, setUsers] = useState<User[]>([]);\n  const [selectedUserId, setSelectedUserId] = useState(0);\n  const [posts, setPosts] = useState<Post[]>([]);\n  const [selectedPostId, setSelectedPostId] = useState(0);\n  const [openPostDetails, setopenPostDetails] = useState(false);\n  const [failedToloadPosts, setFailedToloadPosts] = useState(false);\n\n  useEffect(() => {\n    const getDataFromServer = async () => {\n      const usersFromServer = await getUsers();\n\n      setUsers(usersFromServer);\n    };\n\n    getDataFromServer();\n  }, []);\n\n  const handleSelectedUserId = (\n    event: React.ChangeEvent<HTMLSelectElement>,\n  ) => {\n    setSelectedUserId(+event.target.value);\n  };\n\n  useEffect(() => {\n    const getPostsByUserFromServer = async () => {\n      try {\n        const postsFromServer = await getPostsByUserID(selectedUserId);\n\n        setPosts(postsFromServer);\n      } catch {\n        setFailedToloadPosts(true);\n      }\n    };\n\n    getPostsByUserFromServer();\n  }, [selectedUserId]);\n\n  const handleSelectedPostId = (chosenPostId: number) => {\n    setSelectedPostId(chosenPostId);\n    setopenPostDetails(!!chosenPostId);\n  };\n\n  return (\n    <div className=\"App\">\n      <header className=\"App__header\">\n        <label>\n          Select a user: &nbsp;\n\n          <select\n            className=\"App__user-selector\"\n            value={selectedUserId}\n            onChange={handleSelectedUserId}\n          >\n            <option value=\"0\">All users</option>\n            {users.map(user => (\n              <option\n                key={user.id}\n                value={user.id}\n              >\n                {user.name}\n              </option>\n            ))}\n          </select>\n        </label>\n        {failedToloadPosts && (\n          <p>Failed to load users</p>\n        )}\n      </header>\n\n      <main className=\"App__main\">\n        <div className=\"App__sidebar\">\n          <PostsList\n            posts={posts}\n            selectedPostId={selectedPostId}\n            handleSelectedPostId={handleSelectedPostId}\n          />\n        </div>\n\n        <div className=\"App__content\">\n          {openPostDetails && <PostDetails postId={selectedPostId} />}\n        </div>\n      </main>\n    </div>\n  );\n};\n\nexport default App;\n","import { get } from './api';\nimport User from '../components/types/User';\n\nexport const getUsers = (): Promise<User[]> => {\n  return get<User[]>('/users');\n};\n","import { get } from './api';\nimport Post from '../components/types/Post';\n\nexport const getPostsByUserID = (id: number): Promise<Post[]> => {\n  if (!id) {\n    return get('/posts');\n  }\n\n  return get(`/posts?userId=${id}`);\n};\n\nexport const getPost = (): Promise<Post[]> => {\n  return get('/posts');\n};\n","import ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}